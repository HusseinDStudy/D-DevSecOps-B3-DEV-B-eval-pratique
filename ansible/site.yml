---
- name: Provisionner VM
  hosts: all
  become: yes
  become_method: sudo
  remote_user: ubuntu
  tasks:
    - import_tasks: 2/user_and_group.yml

- name: HTTP Numerisation
  hosts: http # Numerisation
  become: yes
  become_method: sudo
  remote_user: ubuntu
  vars:
    wp_db_name: mydb
    wp_db_user: myuser
    wp_db_password: mypassword
    wp_db_host: localhost
    wp_admin_user: admin
    wp_admin_password: admin_password
    wp_admin_email: admin@example.com
    wp_url: numeration.com
    wp_title: numeration
    mariadb_root_password: "mypassword"
    mariadb_db_name: "myuser"
    mariadb_db_file: "wordpress/bd_numeration.tar.gz"
  tasks:
    - import_tasks: 3/dependences_wordpress.yml
    - import_tasks: 4/automatisation_wordpress_deploiment.yml

- name: BDD Numerisationq
  hosts: bdd # Numerisation
  become: yes
  become_method: sudo
  remote_user: ubuntu
  vars:
    wp_db_name: mydb
    wp_db_user: myuser
    wp_db_password: mypassword
    wp_db_host: localhost
    wp_admin_user: admin
    wp_admin_password: admin_password
    wp_admin_email: admin@example.com
    wp_url: numeration.com
    wp_title: numeration
  tasks:
    - import_tasks: 3/dependences_bdd.yml
    - import_tasks: 4/automatisation_wordpress_bdd.yml
